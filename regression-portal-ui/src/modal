import React, {useState} from 'react';
import {Button, Modal, ModalBody, ModalHeader} from 'reactstrap';

class ModalExample extends Component {


    render() {
        const [modal, setModal] = useState(false);

        const toggle = () => setModal(!modal);

        let data = this.props.data;

        return (
            fetch(`http://pu-nb-cpaul.na.rtdom.net:8080/regression-api/detail?module=${data.module}&date=${data.executionDate}&testCase=${data.testCaseClass}`)
                .then(res => res.json())
                .then(response => {
                    return (
                        <div>
                            <Button color="danger" onClick={toggle}>View</Button>
                            <Modal isOpen={modal} toggle={toggle}>
                                <ModalHeader toggle={toggle}>{response.testCaseClass}</ModalHeader>
                                <ModalBody>
                                    {response.failureReason}
                                </ModalBody>
                            </Modal>
                        </div>
                    );
                })
        )
    }


}

export default ModalExample;
